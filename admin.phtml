<?php
// Database connection
$host = 'localhost';
$user = 'root';
$password = '';
$dbname = 'gymdatabase';

try {
    $pdo = new PDO("mysql:host=$host;dbname=$dbname;charset=utf8mb4", $user, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // Fetch pending registrations
    $query = "SELECT * FROM queue";
    $stmt = $pdo->prepare($query);
    $stmt->execute();
    $users = $stmt->fetchAll(PDO::FETCH_ASSOC);
} catch (PDOException $e) {
    die("Database connection failed: " . $e->getMessage());
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="stylesheet" href="css/mediaQuerries.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/adminpage.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

</head>
<body>
    <!-- <section class="loginPage">
        <form class="loginForm" action="">
            <h1>PeakFit</h1>
            <p>Διαχειριστικό</p>
            <div class="actions">
                <div class="input">
                    <label for="username">Username</label>
                    <input class="formInput" id="username" type="text" name="username">
                </div>
                <div class="input">
                    <label for="password">Password</label>
                    <input class="formInput" id="password" type="password" name="password">
                </div>
                <input class="formSubmit" type="submit" value="Είσοδος">
            </div>
        </form>
    </section> -->

    <section class="adminPage">
        <section class="adminMenu">
            <div class="sectionTitle">
                <h3>Επιλογές <button class="filterToggle"><i class="fa-solid fa-xmark"></i></button></h3>
            </div>
            <div class="menuContent">
                <ul>
                    <li><button class="adminButton"><img src="assets/icons/inbox.png" alt="">Αιτήματα</button></li>
                    <li><button class="adminButton"><img src="assets/icons/users.png" alt="">Χρήστες</button></li>
                    <li><button class="adminButton"><img src="assets/icons/user.png" alt="">Γυμναστές</button></li>
                    <li><button class="adminButton"><img src="assets/icons/gears.png" alt="">Υπηρεσίες</button></li>
                    <li><button class="adminButton"><img src="assets/icons/calendar.png" alt="">Πρόγραμμα</button></li>
                    <li><button class="adminButton"><img src="assets/icons/news.png" alt="">Ανακοινώσεις</button></li>
                    <li><button class="adminButton"><img src="assets/icons/discounts.png" alt="">Προσφορές</button></li>
                 </ul>
            </div>
        </section>
        <section class="adminContent">
            <div class="sectionTitle">
                <h3><button id="filterIcon" class="filterToggle none"><i class="fa-solid fa-bars"></i></button> Αιτήματα</h3>
            </div>
            <section class="adminContent">
    <div class="sectionTitle">
        <h3><button id="filterIcon" class="filterToggle none"><i class="fa-solid fa-bars"></i></button> Section</h3>
    </div>
    <div class="sectionData" id="sectionData">
        <p>Select a menu option to load data.</p>
    </div>
</section>

            <!-- THIS IS THE REQUESTS SECTION -->
            <!-- <div class="sectionData">
                <div class="dataContainer">
                    <?php foreach ($users as $user): ?>
                        <div class="dataCard">
                            <div class="mainData">
                                <div class="infoData">
                                    <p><span>Όνομα:</span> <?= htmlspecialchars($user['name']) ?></p>
                                    <p><span>Επώνυμο:</span> <?= htmlspecialchars($user['surname']) ?></p>
                                </div>
                                <div class="actionsData">
                                    <form action="approve_user.php" method="POST">
                                        <select name="role" id="roles" required>
                                            <option value="" disabled selected>Roles</option>
                                            <option value="user">User</option>
                                            <option value="admin">Admin</option>
                                        </select>
                                        <input type="hidden" name="user_id" value="<?= $user['id'] ?>">
                                        <button class="accept" type="submit"><i class="fa-solid fa-circle-check"></i></button>
                                    </form>
                                    <div class="additionalActions">
                                        <button class="delete" onclick="deleteUser(<?= $user['id'] ?>)"><i class="fa-solid fa-trash-can"></i></button>
                                        <button class="expand"><img src="assets/icons/down arrow.png" alt=""></button>
                                    </div>
                                </div>
                            </div>
                            <div class="secondaryData">
                                <p class="more">Περισσότερα στοιχεία</p>
                                <div class="restData">
                                    <p><span>Χώρα:</span> <?= htmlspecialchars($user['country']) ?> <span>Διεύθυνση:</span> <?= htmlspecialchars($user['address']) ?></p>
                                    <p><span>Πόλη:</span> <?= htmlspecialchars($user['city']) ?> <span>e-mail:</span> <?= htmlspecialchars($user['email']) ?></p>
                                </div>
                            </div>
                        </div>
                    <?php endforeach; ?>
                </div>
            </div> -->

            
            <!-- THIS IS THE Users SECTION -->
            <!-- <div class="sectionData">
                <div class="dataContainer">
                    <div class="dataCard">
                        <div class="mainData">
                            <div class="infoData">
                                <p><span>Όνομα:</span> Μάνος</p>
                                <p><span>Επώνυμο:</span> Φίλιππας</p>
                            </div>
                            <div class="actionsData">
                                <button class="edit"><i class="fa-solid fa-pen"></i></button>
                                <div class="additionalActions">
                                    <button class="delete"><i class="fa-solid fa-trash-can"></i></button>
                                <button class="expand"><img src="assets/icons/down arrow.png" alt=""></button>
                                </div>
                                

                            </div>
                        </div>
                        <div class="secondaryData">
                            <p class="more">Περισσότερα στοιχεία</p>
                            <div class="restData">
                                <p><span>Χώρα:</span> Ελλάδα <span>Διεύθυνση:</span> Καλλιθέα</p>
                                <p><span>Πόλη:</span> Αθήνα <span>e-mail:</span> random@mail.com</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

            <!-- THIS IS THE TRAINERS SECTION -->
            <!-- <div class="sectionData">
                <div class="dataContainer">
                    <div class="dataCard">
                        <div class="mainData">
                            <div class="infoData">
                                <p><span>Όνομα:</span> Μάνος</p>
                                <p><span>Επώνυμο:</span> Φίλιππας</p>
                            </div>
                            <div class="actionsData">
                                <button class="edit"><i class="fa-solid fa-pen"></i></button>
                                <div class="additionalActions">
                                    <button class="delete"><i class="fa-solid fa-trash-can"></i></button>
                                <button class="expand"><img src="assets/icons/down arrow.png" alt=""></button>
                                </div>
                                

                            </div>
                        </div>
                        <div class="secondaryData">
                            <p class="more">Περισσότερα στοιχεία</p>
                            <div class="restData">
                                <p><span>Χώρα:</span> Ελλάδα <span>Διεύθυνση:</span> Καλλιθέα</p>
                                <p><span>Πόλη:</span> Αθήνα <span>e-mail:</span> random@mail.com</p>
                            </div>
                        </div>
                    </div>
                    <div class="addTrainer">
                        <button>Add a trainer</button>
                    </div>

                </div>
                </div> -->

        
    
            </section>
    
    <script src="javaScript/adminPage.js"></script>
    <script src="javaScript/adminDataFetchings.js"></script>
</body>
</html>